<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frequent Websites with Background Image</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom Styles */
        .website-name {
            font-weight: bold;
        }
        .visit-count {
            font-size: 0.9rem;
            color: #6c757d;
        }
        .website-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        /* Background styling */
        body {
            background-size: cover;
            background-position: center;
            min-height: 100vh;
        }
    </style>
</head>
<body>

    <div class="container mt-5">
        <h1>Frequent Websites</h1>

        <!-- Form to Add Website -->
        <form id="websiteForm" class="mb-3">
            <div class="input-group">
                <input type="url" class="form-control" id="websiteURL" placeholder="Enter Website URL" required>
                <button class="btn btn-primary" type="submit">Add Website</button>
            </div>
        </form>

        <!-- File Upload for Background Image -->
        <form id="backgroundFileForm" class="mb-3">
            <div class="input-group">
                <input type="file" class="form-control" id="backgroundImageFile">
                <button class="btn btn-secondary" type="submit">Upload Background Image</button>
            </div>
        </form>

        <!-- Website List Group -->
        <ul class="list-group" id="websiteList">
            <!-- List items will appear here -->
        </ul>
    </div>

    <!-- Bootstrap 5 JS (Optional for interactivity) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        // Function to load frequent websites from localStorage
        function loadFrequentWebsites() {
            const websites = JSON.parse(localStorage.getItem('frequentWebsites')) || {};
            const websiteList = document.getElementById('websiteList');
            websiteList.innerHTML = ''; // Clear existing list

            // Sort websites by visit count in descending order
            const sortedWebsites = Object.entries(websites).sort((a, b) => b[1] - a[1]);

            // Populate the list with websites
            sortedWebsites.forEach(([url, count]) => {
                const listItem = document.createElement('li');
                listItem.classList.add('list-group-item', 'website-item');
                listItem.innerHTML = `
                    <div>
                        <span class="website-name">${url}</span><br>
                        <span class="visit-count">Visited ${count} times</span>
                    </div>
                    <div>
                        <button class="btn btn-link" onclick="openWebsite('${url}')">Visit</button>
                    </div>
                `;
                websiteList.appendChild(listItem);
            });
        }

        // Function to update the visit count of a website
        function updateVisitCount(url) {
            const websites = JSON.parse(localStorage.getItem('frequentWebsites')) || {};
            websites[url] = (websites[url] || 0) + 1;
            localStorage.setItem('frequentWebsites', JSON.stringify(websites));
            loadFrequentWebsites(); // Reload the website list
        }

        // Function to open the website and update the visit count
        function openWebsite(url) {
            window.open(url, '_blank'); // Open the website in a new tab
            updateVisitCount(url); // Increment visit count in localStorage
        }

        // Form submission event listener for website addition
        document.getElementById('websiteForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const websiteURL = document.getElementById('websiteURL').value.trim();
            
            if (websiteURL) {
                // Update the visit count for this URL (add if not exists)
                updateVisitCount(websiteURL);
            }

            // Clear the input field after submission
            document.getElementById('websiteURL').value = '';
        });



        // Set background image from uploaded file
        document.getElementById('backgroundFileForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const fileInput = document.getElementById('backgroundImageFile');
            const file = fileInput.files[0];

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.body.style.backgroundImage = `url(${e.target.result})`;
                };
                reader.readAsDataURL(file);
            }
        });

        // Load the frequent websites on page load
        loadFrequentWebsites();
    </script>

</body>
</html>
